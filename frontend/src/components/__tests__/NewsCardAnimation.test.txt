// failing tests
import { render, screen, fireEvent, act } from "@testing-library/react";
import { describe, it, expect, vi } from "vitest";
import { NewsCardAnimation } from "../NewsCardAnimation";

vi.useFakeTimers();

describe("NewsCardAnimation", () => {
  it("renders the first news card by default", () => {
    render(<NewsCardAnimation />);
    expect(screen.getByText("News Title")).toBeInTheDocument();
    expect(screen.getByText("News")).toBeInTheDocument();
  });

  it("cycles to the next news card on click after flip animation", () => {
    render(<NewsCardAnimation />);
    const container = screen.getByTestId("card-container");

    
    act(() => {
      fireEvent.click(container);
      vi.advanceTimersByTime(500);
    });
    expect(screen.getByText("News Title2")).toBeInTheDocument();
    expect(screen.getByText("News2")).toBeInTheDocument();

    
    act(() => {
      fireEvent.click(container);
      vi.advanceTimersByTime(500);
    });
    expect(screen.getByText("News Title3")).toBeInTheDocument();
    expect(screen.getByText("News3")).toBeInTheDocument();

    
    act(() => {
      fireEvent.click(container);
      vi.advanceTimersByTime(500);
    });
    expect(screen.getByText("News Title")).toBeInTheDocument();
    expect(screen.getByText("News")).toBeInTheDocument();
  });
});